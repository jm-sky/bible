<template>
  <div data-type="book-wrapper">
    <h2 :id="`book_${number}`" class="mt-4 text-center text-3xl ">
      {{ title }}
    </h2>

    <div data-type="book-content">
      <div v-for="(chapter, chapter_no) in book" :key="`book-${number}-chapter-${chapter_no}`" data-type="chapter-content">
        <h3 :id="`chapter_${chapter_no}`" class="my-2 text-2xl ">
          Rozdzia≈Ç {{ chapter_no }}
        </h3>

        <span
          v-for="verse in chapter"
          :id="`chapter_${chapter_no}_verse_${verse.lp}`"
          :key="`book-${number}-chapter-${chapter_no}-verse-${verse.lp}`"
          :data-paragraph="asJson(getParagraphData(title, chapter_no, verse))"
          class="pe-1 transition-all"
        >
          <small class="MsoSubtleReference text-muted">({{ verse.lp }})</small>&nbsp;{{ verse.text }}
        </span>
      </div>
    </div>
    <!-- book-content -->
  </div>
</template>

<script setup lang="ts">
import type { IBook, IVerse } from '@/types/bible.type'

export interface IParagraphData {
  book: string
  chapter: string
  verse: string
}

defineProps<{
  book: IBook
  title: string
  number: number
}>()

const getParagraphData = (title: string, chapter_no: string, verse: IVerse): IParagraphData => {
  return {
    book: title,
    chapter: chapter_no,
    verse: verse.lp,
  }
}

const asJson = (data: IParagraphData) => JSON.stringify(data)
</script>

